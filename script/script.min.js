!function(){document.addEventListener("DOMContentLoaded",event=>{populateData(),document.getElementById("show-how-tos").checked=!0;const tooltipTriggerList=document.querySelectorAll('[data-bs-toggle="tooltip"]'),tooltipList=[...tooltipTriggerList].map(tooltipTriggerEl=>new bootstrap.Tooltip(tooltipTriggerEl));let modal=new bootstrap.Modal("#import-data-from-save")});let populateData=()=>{checklist.forEach(e=>{if(e.checked=!1,document.getElementById("collapse-"+e.id)){let collapse=new bootstrap.Collapse("#collapse-"+e.id,{toggle:!1})}});let data=getData();data?(data.forEach(e=>{let id=e.toLowerCase().replace("_","-"),el=document.getElementById(id);null!=el&&(el.checked=!0)}),uncollapseUntickCheckbox()):uncollapseUntickCheckbox()},uncollapseUntickCheckbox=id=>{if(null!=id){let checked=document.getElementById(id).checked;if(null==document.getElementById("collapse-"+id))return;let ce=bootstrap.Collapse.getInstance("#collapse-"+id);if(null==ce)return;checked?ce.hide():ce.show()}else checklist.forEach(e=>{uncollapseUntickCheckbox(e.id)})};document.getElementById("clear-cache").addEventListener("click",e=>{clearCache()});let clearCache=()=>{checklist.forEach(e=>{e.checked=!1,uncollapseUntickCheckbox(e.id),localStorage.removeItem(localStorageKey)})};document.getElementById("file-import").addEventListener("change",e=>{e.target.files.length<=0||e.target.files.item(0).text().then(e=>{populateDataFromFile(e);let modal=bootstrap.Modal.getInstance("#import-data-from-save");null!=modal&&modal.hide()}).catch(e=>console.error(e))});let populateDataFromFile=text=>{checklist.forEach(e=>{let key="objective."+e.value.toLowerCase(),checked=text.includes(key);e.checked!=checked&&(e.checked=!0,setData(e.value,e.id,e.checked),uncollapseUntickCheckbox(e.id))})};document.getElementById("show-how-tos").addEventListener("click",e=>{let cards=document.getElementsByClassName("card"),checked=e.target.checked;Array.prototype.forEach.call(cards,c=>{checked?(c.classList.remove("visually-hidden"),uncollapseUntickCheckbox(e.id)):c.classList.add("visually-hidden")})});let click=(value,id,checked)=>{""!=value&&null!=value&&""!=id&&null!=id&&null!=checked&&(setData(value,checked),uncollapseUntickCheckbox(id))};const localStorageKey="theredlanternjournal",checklist=document.querySelectorAll("[id^=obj-]");checklist.forEach(e=>{e.addEventListener("click",e=>{click(e.target.value,e.target.id,e.target.checked)})});let addNewData=(data,item,checked)=>{let idx=data.indexOf(item);if(!(checked&&-1!=idx||!checked&&-1==idx))return checked&&-1==idx?data.push(item):checked||-1==idx||data.splice(idx,1),data},setData=(item,checked)=>{if(null==item)return;let data=getData();data=data||[],data=addNewData(data,item,checked),null!=data&&(data=JSON.stringify(data),localStorage.setItem(localStorageKey,data))},getData=item=>{let ls=JSON.parse(localStorage.getItem(localStorageKey));return null!=ls&&(null==item?ls:-1!=item.indexOf(item)||void 0)}}();